{
  "version": 3,
  "sources": ["../../__tmp__/modal.js", "../../__tmp__/syntaxModesRules.js", "../../__tmp__/teachers.js", "../../__tmp__/auth.js", "../../__tmp__/app.js", "../../__tmp__/tabs.js", "../../__tmp__/translating.js", "../../__tmp__/index.js"],
  "sourcesContent": ["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.modal = exports.error = void 0;\n/**\n * The modal we pop up to have children confirm things\n */\nvar Modal = /** @class */ (function () {\n    function Modal() {\n        var _this = this;\n        // Just one binding, never needs stat\n        $('#modal-confirm-button').on('click', function () { return _this.hide(); });\n        $('#modal-no-button').on('click', function () { return _this.hide(); });\n        $('#modal-cancel-button').on('click', function () { return _this.hide(); });\n    }\n    Modal.prototype.show = function () {\n        $('#modal-mask').show();\n        $('#modal-content').show();\n        window.scrollTo(0, 0);\n    };\n    Modal.prototype.hide = function () {\n        $('#modal-mask').hide();\n        $('#modal-content').hide();\n        $('#modal-alert').hide();\n        $('#modal-prompt').hide();\n        $('#modal-confirm').hide();\n    };\n    Modal.prototype.alert = function (message, timeoutMs) {\n        var _this = this;\n        $('#modal-alert-text').text(message);\n        this.show();\n        $('#modal-alert').show();\n        if (timeoutMs)\n            setTimeout(function () { return _this.hide(); }, timeoutMs);\n    };\n    Modal.prototype.confirm = function (message, confirmCb) {\n        var _this = this;\n        $('#modal-confirm-text').text(message);\n        this.show();\n        $('#modal-confirm').show();\n        // Since we need to close over the callback, replace the handler\n        $('#modal-yes-button').off('click').on('click', function () {\n            _this.hide();\n            confirmCb();\n        });\n    };\n    Modal.prototype.prompt = function (message, defaultValue, confirmCb) {\n        var _this = this;\n        $('#modal-prompt-text').text(message);\n        this.show();\n        $('#modal-prompt').show();\n        if (defaultValue)\n            $('#modal-prompt-input').val(defaultValue);\n        // Since we need to close over the callback, replace the handler\n        $('#modal-ok-button').off('click').on('click', function () {\n            _this.hide();\n            var value = $('#modal-prompt-input').val();\n            if (typeof value === 'string') {\n                confirmCb(value);\n            }\n        });\n    };\n    return Modal;\n}());\nvar editor;\n/**\n * The error that appears underneath the code editor\n */\nexports.error = {\n    setEditor: function (e) {\n        editor = e;\n    },\n    hide: function () {\n        $('#errorbox').hide();\n        $('#warningbox').hide();\n        editor === null || editor === void 0 ? void 0 : editor.resize();\n    },\n    showWarning: function (caption, message) {\n        $('#warningbox .caption').text(caption);\n        $('#warningbox .details').text(message);\n        $('#warningbox').show();\n        editor === null || editor === void 0 ? void 0 : editor.resize();\n    },\n    show: function (caption, message) {\n        $('#errorbox .caption').text(caption);\n        $('#errorbox .details').text(message);\n        $('#errorbox').show();\n        editor === null || editor === void 0 ? void 0 : editor.resize();\n    }\n};\nexports.modal = new Modal();\n", "\"use strict\";\n// Basic highlighter rules we can use in most levels\n// - Highlighters always begin in the 'start' state, and see line by line (no newlines!)\n// - We try to recognize as many commands and tokens as possible in 'start', only deviating\n//   to another state to avoid highlighting something.\n// - 'expression_eol' is the state to contain arbitrary values that will always eat the rest of the line\n// - 'gobble' is the state that will eat whatever is left in the line and go back to 'start'\nfunction baseRules() {\n    return {\n        // gobble is a state in which we can read anything (.*), used after print\n        gobble: [\n            {\n                regex: '.*',\n                token: 'text',\n                next: 'start',\n            }\n        ],\n        // this function creates two rules, one to recognize strings and at random within a line (staying in the same state)\n        // and one where it is recognized at the end of the line (going back to start)\n        expression_eol: finishLine([\n            {\n                regex: \"'[^']*'\",\n                token: 'constant.character',\n            },\n            {\n                regex: 'at random',\n                token: 'keyword'\n            },\n            {\n                regex: '$',\n                token: 'text',\n            },\n        ]),\n    };\n}\nvar LEVELS = [\n    {\n        name: 'level1',\n        rules: pipe(baseRules(), rule_printSpace('gobble'), rule_turtle(), recognize('start', {\n            regex: keywordWithSpace('echo'),\n            token: 'keyword',\n            next: 'gobble',\n        }), recognize('start', {\n            regex: keywordWithSpace('ask'),\n            token: 'keyword',\n            next: 'gobble',\n        })),\n    },\n    {\n        // Adds lists and 'at random'\n        name: 'level2',\n        rules: pipe(baseRules(), rule_printSpace('expression_eol'), rule_isAsk('gobble'), rule_is('gobble'), rule_turtle()),\n    },\n    {\n        // Adds quoted text\n        name: 'level3',\n        rules: pipe(baseRules(), rule_turtle(), rule_printSpace('expression_eol'), rule_isAsk(), rule_is()),\n    },\n    {\n        // Adds if/else\n        name: 'level4',\n        rules: pipe(baseRules(), rule_printSpace(), rule_isAsk(), rule_is(), rule_ifElseOneLine(), rule_expressions()),\n    },\n    {\n        // Adds repeat\n        name: 'level5',\n        rules: pipe(baseRules(), rule_printSpace(), rule_isAsk(), rule_is(), rule_ifElseOneLine(), rule_expressions(), rule_repeat()),\n    },\n    {\n        // Adds arithmetic\n        name: 'level6',\n        rules: pipe(baseRules(), rule_printSpace(), rule_isAsk(), rule_is(), rule_ifElseOneLine(), rule_expressions(), rule_repeat(), rule_arithmetic()),\n    },\n    {\n        // Adds indented blocks -- no changes to highlighter necessary\n        name: 'level7',\n        rules: pipe(baseRules(), rule_printSpace(), rule_isAsk(), rule_is(), rule_ifElse(), rule_expressions(), rule_repeat(), rule_arithmetic()),\n    },\n    {\n        // Replaces 'repeat' with 'for'\n        name: 'level8',\n        rules: pipe(baseRules(), rule_printSpace(), rule_isAsk(), rule_is(), rule_ifElse(), rule_expressions(), rule_arithmetic(), rule_for()),\n    },\n    {\n        // Replaces 'repeat' with 'for'\n        name: 'level9and10',\n        rules: pipe(baseRules(), rule_printSpace(), rule_isAsk(), rule_is(), rule_ifElse(), rule_expressions(), rule_arithmetic(), rule_forRange(), rule_for()),\n    },\n    {\n        // Nesting of 'for' loops (no changes necessary)\n        name: 'level11',\n        rules: pipe(baseRules(), rule_printSpace(), rule_isAsk(), rule_is(), rule_ifElse(), rule_expressions(), rule_arithmetic(), rule_forRange()),\n    },\n    {\n        // Adding fncall parens\n        name: 'level12',\n        rules: pipe(baseRules(), rule_printParen(), rule_isInputParen(), rule_is(), rule_ifElse(), rule_expressions(), rule_arithmetic(), rule_forRangeParen()),\n    },\n    // ----------------------------------------------------------------\n    //  Everything below this line hasn't been done yet\n    // ----------------------------------------------------------------\n    {\n        name: 'level11',\n        rules: pipe(baseRules(), rule_printParen(), rule_isInputParen(), rule_is(), rule_ifElse(), rule_expressions(), rule_arithmetic(), rule_forRangeParen()),\n    },\n    {\n        name: 'level13',\n        rules: pipe(baseRules(), rule_printParen(), rule_isInputParen(), rule_is(), rule_ifElse(), rule_expressions(), rule_arithmetic(), rule_forRangeParen()),\n    },\n    {\n        name: 'level14',\n        rules: pipe(baseRules(), rule_printParen(), rule_isInputParen(), rule_is(), rule_ifElse(), rule_expressions(), rule_arithmetic(), rule_forRangeParen()),\n    },\n    {\n        name: 'level15',\n        rules: pipe(baseRules(), rule_printParen(), rule_isInputParen(), rule_is(), rule_ifElse(), rule_expressions(), rule_arithmetic(), rule_forRangeParen()),\n    },\n    {\n        name: 'level16',\n        rules: pipe(baseRules(), rule_printParen(), rule_isInputParen(), rule_is(), rule_ifElse(), rule_expressions(), rule_arithmetic(), rule_forRangeParen()),\n    },\n    {\n        name: 'level17',\n        rules: pipe(baseRules(), rule_printParen(), rule_isInputParen(), rule_is(), rule_ifElse(), rule_expressions(), rule_arithmetic(), rule_forRangeParen()),\n    },\n    {\n        name: 'level18and19',\n        rules: pipe(baseRules(), rule_printParen(), rule_isInputParen(), rule_is(), rule_ifElse(), rule_expressions(), rule_arithmetic(), rule_forRangeParen()),\n    },\n    {\n        name: 'level20',\n        rules: pipe(baseRules(), rule_printParen(), rule_isInputParen(), rule_is(), rule_ifElse(), rule_expressions(), rule_arithmetic(), rule_forRangeParen()),\n    },\n    {\n        name: 'level21',\n        rules: pipe(baseRules(), rule_printParen(), rule_isInputParen(), rule_is(), rule_ifElse(), rule_expressions(), rule_arithmetic(), rule_forRangeParen()),\n    },\n    {\n        name: 'level22',\n        rules: pipe(baseRules(), rule_printParen(), rule_isInputParen(), rule_is(), rule_ifElse(), rule_expressions(), rule_arithmetic(), rule_forRangeParen()),\n    },\n    {\n        name: 'level23',\n        rules: pipe(baseRules(), rule_printParen(), rule_isInputParen(), rule_is(), rule_ifElse(), rule_expressions(), rule_arithmetic(), rule_forRangeParen()),\n    },\n];\n/**\n * From a list of rules, duplicate all rules\n *\n * - 1 is the rule that's given\n * - 2 is the same rule, adding an '$' which returns to the 'start' state\n *\n * 2nd one comes first to have the right precedence.\n */\nfunction finishLine(rules) {\n    var ret = [];\n    for (var _i = 0, rules_1 = rules; _i < rules_1.length; _i++) {\n        var rule = rules_1[_i];\n        if (rule.regex) {\n            ret.push({\n                regex: rule.regex + '$',\n                token: rule.token,\n                next: 'start',\n            });\n        }\n        ret.push(rule);\n    }\n    return ret;\n}\n/**\n * Add a single rule, or multiple rules, to a given state, or multiple states\n *\n * Examples:\n *\n * - recognize('start', { regex, token, next })\n * - recognize(['start', 'expression'], { regex, token, next })\n * - recognize('start', [{ ... }, {...}])\n */\nfunction recognize(stateOrStates, ruleOrRules) {\n    return function (rules) {\n        var _a;\n        if (!Array.isArray(stateOrStates)) {\n            stateOrStates = [stateOrStates];\n        }\n        for (var _i = 0, stateOrStates_1 = stateOrStates; _i < stateOrStates_1.length; _i++) {\n            var state = stateOrStates_1[_i];\n            if (!rules[state]) {\n                rules[state] = [];\n            }\n            if (Array.isArray(ruleOrRules)) {\n                (_a = rules[state]).push.apply(_a, ruleOrRules);\n            }\n            else {\n                rules[state].push(ruleOrRules);\n            }\n        }\n        return rules;\n    };\n}\n/**\n * comp(f1, f2, f3, ...)\n *\n * Returns f1 \u25CB f2 \u25CB f3 \u25CB ...\n */\nfunction comp() {\n    var fns = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        fns[_i] = arguments[_i];\n    }\n    return function (val) {\n        for (var _i = 0, fns_1 = fns; _i < fns_1.length; _i++) {\n            var fn = fns_1[_i];\n            val = fn(val);\n        }\n        return val;\n    };\n}\n/**\n * pipe(X, f1, f2, f3, ...)\n *\n * Returns ...(f3(f2(f1(X)))\n *\n * (Same as X |> f1 |> f2 |> f3 |> ...)\n */\nfunction pipe(val) {\n    var fns = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        fns[_i - 1] = arguments[_i];\n    }\n    return comp.apply(void 0, fns)(val);\n}\n/**\n * Add a 'print' rule, going to the indicated 'next' state (start if omitted)\n */\nfunction rule_printSpace(next) {\n    return recognize('start', {\n        regex: keywordWithSpace('print'),\n        token: 'keyword',\n        next: next !== null && next !== void 0 ? next : 'start',\n    });\n}\n/**\n * Add an 'is ask' rule, going to the indicated 'next' state (expression_eol if omitted)\n */\nfunction rule_isAsk(next) {\n    return recognize('start', {\n        regex: '(\\\\w+)( is ask )',\n        token: ['text', 'keyword'],\n        next: next !== null && next !== void 0 ? next : 'expression_eol',\n    });\n}\n/**\n * Add an 'is' rule, going to the indicated 'next' state (expression_eol if omitted)\n */\nfunction rule_is(next) {\n    return recognize('start', {\n        regex: '(\\\\w+)( is )',\n        token: ['text', 'keyword'],\n        next: next !== null && next !== void 0 ? next : 'expression_eol',\n    });\n}\n/**\n * Add a 'print' rule with brackets\n */\nfunction rule_printParen() {\n    return recognize('start', {\n        regex: '(print)(\\\\()',\n        token: ['keyword', 'paren.lparen'],\n        next: 'start'\n    });\n}\nfunction rule_turtle() {\n    return comp(recognize('start', {\n        regex: 'turn (left|right)?',\n        token: 'keyword',\n        next: 'start',\n    }), recognize('start', {\n        regex: 'forward',\n        token: 'keyword',\n        next: 'start',\n    }));\n}\n/**\n * Add an 'is input' rule with brackets\n */\nfunction rule_isInputParen() {\n    return recognize('start', {\n        regex: '(\\\\w+)( is input)(\\\\()',\n        token: ['text', 'keyword', 'paren.lparen'],\n        next: 'start'\n    });\n}\n/**\n * Recognize expressions as part of the 'start' state\n */\nfunction rule_expressions() {\n    return comp(recognize('start', {\n        regex: \"'[^']*'\",\n        token: 'constant.character',\n    }), recognize('start', {\n        regex: 'at random',\n        token: 'keyword'\n    }), recognize('start', {\n        regex: '[, ]+',\n        token: 'punctuation.operator',\n    }));\n}\n/**\n * Add highlighting for if/else, also add a condition\n */\nfunction rule_ifElseOneLine() {\n    return comp(recognize('start', {\n        regex: keywordWithSpace('if'),\n        token: 'keyword',\n        next: 'condition',\n    }), recognize('start', {\n        regex: keywordWithSpace('else'),\n        token: 'keyword',\n    }), recognize('condition', {\n        regex: keywordWithSpace('is'),\n        token: 'keyword',\n        next: 'start',\n    }));\n}\nfunction rule_ifElse() {\n    return comp(recognize('start', {\n        regex: keywordWithSpace('if'),\n        token: 'keyword',\n        next: 'condition',\n    }), recognize('start', {\n        regex: '\\\\b' + 'else' + '\\\\b',\n        token: 'keyword',\n    }), recognize('condition', {\n        regex: keywordWithSpace('((is)|(in))'),\n        token: 'keyword',\n        next: 'start',\n    }));\n}\n/**\n * Add numbers and arithmetic\n */\nfunction rule_arithmetic() {\n    return recognize(['start', 'expression_eol'], [\n        {\n            regex: ' \\\\* ',\n            token: 'keyword',\n        },\n        {\n            regex: ' \\\\+ ',\n            token: 'keyword',\n        },\n        {\n            regex: ' \\\\- ',\n            token: 'keyword',\n        },\n    ]);\n}\n/**\n * Add highlighting for repeat\n */\nfunction rule_repeat() {\n    return recognize('start', {\n        regex: '(repeat)( \\\\w+ )(times)',\n        token: ['keyword', 'text', 'keyword'],\n    });\n}\nfunction rule_for() {\n    return recognize('start', {\n        regex: '(for )(\\\\w+)( in )(\\\\w+)',\n        token: ['keyword', 'text', 'keyword', 'text'],\n    });\n}\nfunction rule_forRange() {\n    return recognize('start', {\n        regex: '(for )(\\\\w+)( in range )(\\\\w+)( to )(\\\\w+)',\n        token: ['keyword', 'text', 'keyword', 'text', 'keyword', 'text'],\n    });\n}\nfunction rule_forRangeParen() {\n    return recognize('start', {\n        regex: '(for )(\\\\w+)( in range)(\\\\()([\\\\s\\\\w]+)(,)([\\\\s\\\\w]+)(\\\\))',\n        token: ['keyword', 'text', 'keyword', 'paren.lparen', 'text', 'punctuation.operator', 'text', 'paren.rparen'],\n    });\n}\n/**\n * Modify the given ruleset, replacing literal spaces with \"one or more spaces\"\n */\nfunction loosenRules(rules) {\n    for (var _i = 0, _a = Object.values(rules); _i < _a.length; _i++) {\n        var ruleSets = _a[_i];\n        for (var _b = 0, ruleSets_1 = ruleSets; _b < ruleSets_1.length; _b++) {\n            var rule = ruleSets_1[_b];\n            if (rule.regex && !rule._loosened) {\n                rule.regex = rule.regex.replace(/ /g, ' +');\n                rule._loosened = true;\n            }\n        }\n    }\n    return rules;\n}\n// Only do this work if the 'define' function is actually available at runtime.\n// If not, this script got included on a page that didn't include the Ace\n// editor. No point in continuing if that is the case.\nif (window.define) {\n    var _loop_1 = function (level) {\n        // This is a local definition of the file 'ace/mode/level1.js', etc.\n        define('ace/mode/' + level.name, [], function (require, exports, _module) {\n            var oop = require('ace/lib/oop');\n            var TextMode = require('ace/mode/text').Mode;\n            var TextHighlightRules = require('ace/mode/text_highlight_rules').TextHighlightRules;\n            function ThisLevelHighlightRules() {\n                this.$rules = loosenRules(level.rules);\n                this.normalizeRules();\n            }\n            ;\n            oop.inherits(ThisLevelHighlightRules, TextHighlightRules);\n            function Mode() {\n                this.HighlightRules = ThisLevelHighlightRules;\n            }\n            ;\n            oop.inherits(Mode, TextMode);\n            exports.Mode = Mode;\n        });\n    };\n    // Define the modes based on the level definitions above\n    for (var _i = 0, LEVELS_1 = LEVELS; _i < LEVELS_1.length; _i++) {\n        var level = LEVELS_1[_i];\n        _loop_1(level);\n    }\n}\n/**\n * Wrap a keyword in word-boundary markers for use in the tokenizer regexes\n *\n * Use this to only recognize a word if it's a complete word by itself (and\n * not accidentally a part of a larger word).\n *\n * The keyword must be followed by space.\n */\nfunction keywordWithSpace(keyword) {\n    return '\\\\b' + keyword + ' ';\n}\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.remove_student = exports.join_class = exports.delete_class = exports.rename_class = exports.create_class = void 0;\nvar modal_1 = require(\"./modal\");\nvar auth_1 = require(\"./auth\");\nfunction create_class() {\n    modal_1.modal.prompt(auth_1.auth.texts['class_name_prompt'], '', function (class_name) {\n        $.ajax({\n            type: 'POST',\n            url: '/class',\n            data: JSON.stringify({\n                name: class_name\n            }),\n            contentType: 'application/json',\n            dataType: 'json'\n        }).done(function (_response) {\n            location.reload();\n        }).fail(function (err) {\n            console.error(err);\n            modal_1.error.show(ErrorMessages['Connection_error'], JSON.stringify(err));\n        });\n    });\n}\nexports.create_class = create_class;\nfunction rename_class(id) {\n    modal_1.modal.prompt(auth_1.auth.texts['class_name_prompt'], '', function (class_name) {\n        $.ajax({\n            type: 'PUT',\n            url: '/class/' + id,\n            data: JSON.stringify({\n                name: class_name\n            }),\n            contentType: 'application/json',\n            dataType: 'json'\n        }).done(function (_response) {\n            location.reload();\n        }).fail(function (err) {\n            console.error(err);\n            modal_1.error.show(ErrorMessages['Connection_error'], JSON.stringify(err));\n        });\n    });\n}\nexports.rename_class = rename_class;\nfunction delete_class(id) {\n    modal_1.modal.confirm(auth_1.auth.texts['delete_class_prompt'], function () {\n        $.ajax({\n            type: 'DELETE',\n            url: '/class/' + id,\n            contentType: 'application/json',\n            dataType: 'json'\n        }).done(function (_response) {\n            window.location.pathname = '/for-teachers';\n        }).fail(function (err) {\n            console.error(err);\n            modal_1.error.show(ErrorMessages['Connection_error'], JSON.stringify(err));\n        });\n    });\n}\nexports.delete_class = delete_class;\nfunction join_class(link, name, noRedirect) {\n    if (noRedirect === void 0) { noRedirect = false; }\n    // If there's no session but we want to join the class, we store the program data in localStorage and redirect to /login.\n    if (!auth_1.auth.profile) {\n        return modal_1.modal.confirm(auth_1.auth.texts['join_prompt'], function () {\n            localStorage.setItem('hedy-join', JSON.stringify({ link: link, name: name }));\n            window.location.pathname = '/login';\n            return;\n        });\n    }\n    $.ajax({\n        type: 'GET',\n        url: link,\n    }).done(function (_response) {\n        modal_1.modal.alert(auth_1.auth.texts['class_join_confirmation'] + ' ' + name);\n        if (!noRedirect)\n            window.location.pathname = '/programs';\n    }).fail(function (err) {\n        console.error(err);\n        modal_1.error.show(ErrorMessages['Connection_error'], JSON.stringify(err));\n    });\n}\nexports.join_class = join_class;\nfunction remove_student(class_id, student_id) {\n    modal_1.modal.confirm(auth_1.auth.texts['remove_student_prompt'], function () {\n        $.ajax({\n            type: 'DELETE',\n            url: '/class/' + class_id + '/student/' + student_id,\n            contentType: 'application/json',\n            dataType: 'json'\n        }).done(function (_response) {\n            location.reload();\n        }).fail(function (err) {\n            console.error(err);\n            modal_1.error.show(ErrorMessages['Connection_error'], JSON.stringify(err));\n        });\n    });\n}\nexports.remove_student = remove_student;\n", "\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.auth = void 0;\nvar modal_1 = require(\"./modal\");\nvar teachers_1 = require(\"./teachers\");\nvar app_1 = require(\"./app\");\nvar countries = { 'AF': 'Afghanistan', 'AX': '\u00C5land Islands', 'AL': 'Albania', 'DZ': 'Algeria', 'AS': 'American Samoa', 'AD': 'Andorra', 'AO': 'Angola', 'AI': 'Anguilla', 'AQ': 'Antarctica', 'AG': 'Antigua and Barbuda', 'AR': 'Argentina', 'AM': 'Armenia', 'AW': 'Aruba', 'AU': 'Australia', 'AT': 'Austria', 'AZ': 'Azerbaijan', 'BS': 'Bahamas', 'BH': 'Bahrain', 'BD': 'Bangladesh', 'BB': 'Barbados', 'BY': 'Belarus', 'BE': 'Belgium', 'BZ': 'Belize', 'BJ': 'Benin', 'BM': 'Bermuda', 'BT': 'Bhutan', 'BO': 'Bolivia, Plurinational State of', 'BQ': 'Bonaire, Sint Eustatius and Saba', 'BA': 'Bosnia and Herzegovina', 'BW': 'Botswana', 'BV': 'Bouvet Island', 'BR': 'Brazil', 'IO': 'British Indian Ocean Territory', 'BN': 'Brunei Darussalam', 'BG': 'Bulgaria', 'BF': 'Burkina Faso', 'BI': 'Burundi', 'KH': 'Cambodia', 'CM': 'Cameroon', 'CA': 'Canada', 'CV': 'Cape Verde', 'KY': 'Cayman Islands', 'CF': 'Central African Republic', 'TD': 'Chad', 'CL': 'Chile', 'CN': 'China', 'CX': 'Christmas Island', 'CC': 'Cocos (Keeling) Islands', 'CO': 'Colombia', 'KM': 'Comoros', 'CG': 'Congo', 'CD': 'Congo, the Democratic Republic of the', 'CK': 'Cook Islands', 'CR': 'Costa Rica', 'CI': 'C\u00F4te d\\'Ivoire', 'HR': 'Croatia', 'CU': 'Cuba', 'CW': 'Cura\u00E7ao', 'CY': 'Cyprus', 'CZ': 'Czech Republic', 'DK': 'Denmark', 'DJ': 'Djibouti', 'DM': 'Dominica', 'DO': 'Dominican Republic', 'EC': 'Ecuador', 'EG': 'Egypt', 'SV': 'El Salvador', 'GQ': 'Equatorial Guinea', 'ER': 'Eritrea', 'EE': 'Estonia', 'ET': 'Ethiopia', 'FK': 'Falkland Islands (Malvinas)', 'FO': 'Faroe Islands', 'FJ': 'Fiji', 'FI': 'Finland', 'FR': 'France', 'GF': 'French Guiana', 'PF': 'French Polynesia', 'TF': 'French Southern Territories', 'GA': 'Gabon', 'GM': 'Gambia', 'GE': 'Georgia', 'DE': 'Germany', 'GH': 'Ghana', 'GI': 'Gibraltar', 'GR': 'Greece', 'GL': 'Greenland', 'GD': 'Grenada', 'GP': 'Guadeloupe', 'GU': 'Guam', 'GT': 'Guatemala', 'GG': 'Guernsey', 'GN': 'Guinea', 'GW': 'Guinea-Bissau', 'GY': 'Guyana', 'HT': 'Haiti', 'HM': 'Heard Island and McDonald Islands', 'VA': 'Holy See (Vatican City State)', 'HN': 'Honduras', 'HK': 'Hong Kong', 'HU': 'Hungary', 'IS': 'Iceland', 'IN': 'India', 'ID': 'Indonesia', 'IR': 'Iran, Islamic Republic of', 'IQ': 'Iraq', 'IE': 'Ireland', 'IM': 'Isle of Man', 'IL': 'Israel', 'IT': 'Italy', 'JM': 'Jamaica', 'JP': 'Japan', 'JE': 'Jersey', 'JO': 'Jordan', 'KZ': 'Kazakhstan', 'KE': 'Kenya', 'KI': 'Kiribati', 'KP': 'Korea, Democratic People\\'s Republic of', 'KR': 'Korea, Republic of', 'KW': 'Kuwait', 'KG': 'Kyrgyzstan', 'LA': 'Lao People\\'s Democratic Republic', 'LV': 'Latvia', 'LB': 'Lebanon', 'LS': 'Lesotho', 'LR': 'Liberia', 'LY': 'Libya', 'LI': 'Liechtenstein', 'LT': 'Lithuania', 'LU': 'Luxembourg', 'MO': 'Macao', 'MK': 'Macedonia, the Former Yugoslav Republic of', 'MG': 'Madagascar', 'MW': 'Malawi', 'MY': 'Malaysia', 'MV': 'Maldives', 'ML': 'Mali', 'MT': 'Malta', 'MH': 'Marshall Islands', 'MQ': 'Martinique', 'MR': 'Mauritania', 'MU': 'Mauritius', 'YT': 'Mayotte', 'MX': 'Mexico', 'FM': 'Micronesia, Federated States of', 'MD': 'Moldova, Republic of', 'MC': 'Monaco', 'MN': 'Mongolia', 'ME': 'Montenegro', 'MS': 'Montserrat', 'MA': 'Morocco', 'MZ': 'Mozambique', 'MM': 'Myanmar', 'NA': 'Namibia', 'NR': 'Nauru', 'NP': 'Nepal', 'NL': 'Netherlands', 'NC': 'New Caledonia', 'NZ': 'New Zealand', 'NI': 'Nicaragua', 'NE': 'Niger', 'NG': 'Nigeria', 'NU': 'Niue', 'NF': 'Norfolk Island', 'MP': 'Northern Mariana Islands', 'NO': 'Norway', 'OM': 'Oman', 'PK': 'Pakistan', 'PW': 'Palau', 'PS': 'Palestine, State of', 'PA': 'Panama', 'PG': 'Papua New Guinea', 'PY': 'Paraguay', 'PE': 'Peru', 'PH': 'Philippines', 'PN': 'Pitcairn', 'PL': 'Poland', 'PT': 'Portugal', 'PR': 'Puerto Rico', 'QA': 'Qatar', 'RE': 'R\u00E9union', 'RO': 'Romania', 'RU': 'Russian Federation', 'RW': 'Rwanda', 'BL': 'Saint Barth\u00E9lemy', 'SH': 'Saint Helena, Ascension and Tristan da Cunha', 'KN': 'Saint Kitts and Nevis', 'LC': 'Saint Lucia', 'MF': 'Saint Martin (French part)', 'PM': 'Saint Pierre and Miquelon', 'VC': 'Saint Vincent and the Grenadines', 'WS': 'Samoa', 'SM': 'San Marino', 'ST': 'Sao Tome and Principe', 'SA': 'Saudi Arabia', 'SN': 'Senegal', 'RS': 'Serbia', 'SC': 'Seychelles', 'SL': 'Sierra Leone', 'SG': 'Singapore', 'SX': 'Sint Maarten (Dutch part)', 'SK': 'Slovakia', 'SI': 'Slovenia', 'SB': 'Solomon Islands', 'SO': 'Somalia', 'ZA': 'South Africa', 'GS': 'South Georgia and the South Sandwich Islands', 'SS': 'South Sudan', 'ES': 'Spain', 'LK': 'Sri Lanka', 'SD': 'Sudan', 'SR': 'Suriname', 'SJ': 'Svalbard and Jan Mayen', 'SZ': 'Swaziland', 'SE': 'Sweden', 'CH': 'Switzerland', 'SY': 'Syrian Arab Republic', 'TW': 'Taiwan, Province of China', 'TJ': 'Tajikistan', 'TZ': 'Tanzania, United Republic of', 'TH': 'Thailand', 'TL': 'Timor-Leste', 'TG': 'Togo', 'TK': 'Tokelau', 'TO': 'Tonga', 'TT': 'Trinidad and Tobago', 'TN': 'Tunisia', 'TR': 'Turkey', 'TM': 'Turkmenistan', 'TC': 'Turks and Caicos Islands', 'TV': 'Tuvalu', 'UG': 'Uganda', 'UA': 'Ukraine', 'AE': 'United Arab Emirates', 'GB': 'United Kingdom', 'US': 'United States', 'UM': 'United States Minor Outlying Islands', 'UY': 'Uruguay', 'UZ': 'Uzbekistan', 'VU': 'Vanuatu', 'VE': 'Venezuela, Bolivarian Republic of', 'VN': 'Viet Nam', 'VG': 'Virgin Islands, British', 'VI': 'Virgin Islands, U.S.', 'WF': 'Wallis and Futuna', 'EH': 'Western Sahara', 'YE': 'Yemen', 'ZM': 'Zambia', 'ZW': 'Zimbabwe' };\nexports.auth = {\n    texts: AuthMessages,\n    profile: undefined,\n    reset: undefined,\n    entityify: function (string) {\n        return string.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\"/g, '&quot;').replace(/'/g, '&#39;').replace(/`/g, '&#96;');\n    },\n    emailRegex: /^(([a-zA-Z0-9_+\\.\\-]+)@([\\da-zA-Z\\.\\-]+)\\.([a-zA-Z\\.]{2,6})\\s*)$/,\n    redirect: function (where) {\n        where = '/' + where;\n        window.location.pathname = where;\n    },\n    logout: function () {\n        $.ajax({ type: 'POST', url: '/auth/logout' }).done(function () {\n            exports.auth.redirect('login');\n        });\n    },\n    destroy: function () {\n        modal_1.modal.confirm(exports.auth.texts['are_you_sure'], function () {\n            $.ajax({ type: 'POST', url: '/auth/destroy' }).done(function () {\n                exports.auth.redirect('');\n            });\n        });\n    },\n    error: function (message, element, id) {\n        $(id || '#error').html(message);\n        $(id || '#error').css('display', 'block');\n        if (element)\n            $('#' + element).css('border', 'solid 1px red');\n    },\n    clear_error: function (id) {\n        $(id || '#error').html('');\n        $(id || '#error').css('display', 'none');\n        $('form *').css('border', '');\n    },\n    success: function (message, id) {\n        $('#error').css('display', 'none');\n        $(id || '#success').html(message);\n        $(id || '#success').css('display', 'block');\n    },\n    submit: function (op) {\n        var _this = this;\n        var _a, _b, _c, _d;\n        var values = {};\n        $('form.auth *').map(function (_k, el) {\n            if (el.id)\n                values[el.id] = el.value;\n        });\n        if (op === 'signup') {\n            if (!values.username)\n                return exports.auth.error(exports.auth.texts['please_username'], 'username');\n            values.username = values.username.trim();\n            if (values.username.length < 3)\n                return exports.auth.error(exports.auth.texts['username_three'], 'username');\n            if (values.username.match(/:|@/))\n                return exports.auth.error(exports.auth.texts['username_special'], 'username');\n            if (!values.password)\n                return exports.auth.error(exports.auth.texts['please_password'], 'password');\n            if (values.password.length < 6)\n                return exports.auth.error(exports.auth.texts['password_six'], 'password');\n            if (!((_a = values.email) === null || _a === void 0 ? void 0 : _a.match(exports.auth.emailRegex)))\n                return exports.auth.error(exports.auth.texts['valid_email'], 'email');\n            if (values.email !== values.mail_repeat)\n                return exports.auth.error(exports.auth.texts['repeat_match_email'], 'mail_repeat');\n            if (values.password !== values.password_repeat)\n                return exports.auth.error(exports.auth.texts['repeat_match_password'], 'password_repeat');\n            if (values.birth_year) {\n                if (!validBirthYearString(values.birth_year)) {\n                    return exports.auth.error(exports.auth.texts['valid_year'] + new Date().getFullYear(), 'birth_year');\n                }\n            }\n            var payload = {\n                username: values.username,\n                email: values.email,\n                password: values.password,\n                birth_year: values.birth_year ? parseInt(values.birth_year) : undefined,\n                country: values.country,\n                gender: values.gender,\n                subscribe: $('#subscribe').prop('checked'),\n                prog_experience: $('input[name=has_experience]:checked').val(),\n                experience_languages: $('#languages').is(':visible')\n                    ? $('input[name=languages]').filter(':checked').map(function () { return $(_this).val(); }).get()\n                    : undefined,\n            };\n            $.ajax({ type: 'POST', url: '/auth/signup', data: JSON.stringify(payload), contentType: 'application/json; charset=utf-8' }).done(function () {\n                exports.auth.success(exports.auth.texts['signup_success']);\n                // We set up a non-falsy profile to let `saveit` know that we're logged in. We put session_expires_at since we need it.\n                exports.auth.profile = { session_expires_at: Date.now() + 1000 * 60 * 60 * 24 };\n                afterLogin();\n            }).fail(function (response) {\n                var error = response.responseText || '';\n                if (error.match('email'))\n                    exports.auth.error(exports.auth.texts['exists_email']);\n                else if (error.match('username'))\n                    exports.auth.error(exports.auth.texts['exists_username']);\n                else\n                    exports.auth.error(exports.auth.texts['ajax_error']);\n            });\n        }\n        if (op === 'login') {\n            if (!values.username)\n                return exports.auth.error(exports.auth.texts['please_username_email'], 'username');\n            if (!values.password)\n                return exports.auth.error(exports.auth.texts['please_password'], 'password');\n            exports.auth.clear_error();\n            $.ajax({ type: 'POST', url: '/auth/login', data: JSON.stringify({ username: values.username, password: values.password }), contentType: 'application/json; charset=utf-8' }).done(function () {\n                // We set up a non-falsy profile to let `saveit` know that we're logged in. We put session_expires_at since we need it.\n                exports.auth.profile = { session_expires_at: Date.now() + 1000 * 60 * 60 * 24 };\n                afterLogin();\n            }).fail(function (response) {\n                var _a;\n                if (response.status === 403) {\n                    exports.auth.error(exports.auth.texts['invalid_username_password'] + ' ' + exports.auth.texts['no_account'] + ' &nbsp;<button class=\"green-btn\" onclick=\"auth.redirect (\\'signup\\')\">' + exports.auth.texts['create_account'] + '</button>');\n                    $('#create-account').hide();\n                    localStorage.setItem('hedy-login-username', (_a = values.username) !== null && _a !== void 0 ? _a : '');\n                }\n                else\n                    exports.auth.error(exports.auth.texts['ajax_error']);\n            });\n        }\n        if (op === 'profile') {\n            if (!((_b = values.email) !== null && _b !== void 0 ? _b : '').match(exports.auth.emailRegex))\n                return exports.auth.error(exports.auth.texts['valid_email'], 'email');\n            if (values.birth_year) {\n                if (!validBirthYearString(values.birth_year)) {\n                    return exports.auth.error(exports.auth.texts['valid_year'] + new Date().getFullYear(), 'birth_year');\n                }\n            }\n            var payload = {\n                email: values['email'],\n                birth_year: values.birth_year ? parseInt(values['birth_year']) : undefined,\n                country: values['country'],\n                gender: values['gender'],\n                prog_experience: $('input[name=has_experience]:checked').val(),\n                experience_languages: $('#languages').is(':visible')\n                    ? $('input[name=languages]').filter(':checked').map(function () { return $(_this).val(); }).get()\n                    : undefined,\n            };\n            console.log(payload);\n            exports.auth.clear_error();\n            $.ajax({ type: 'POST', url: '/profile', data: JSON.stringify(payload), contentType: 'application/json; charset=utf-8' }).done(function () {\n                exports.auth.success(exports.auth.texts['profile_updated']);\n            }).fail(function (response) {\n                exports.auth.error(exports.auth.texts['ajax_error'] + ' ' + response.responseText);\n            });\n        }\n        if (op === 'change_password') {\n            if (!values.password)\n                return exports.auth.error(exports.auth.texts['please_password'], 'password', '#error-password');\n            if (values.password.length < 6)\n                return exports.auth.error(exports.auth.texts['password_six'], 'password', '#error-password');\n            if (values.password !== values.password_repeat)\n                return exports.auth.error(exports.auth.texts['repeat_match'], 'password_repeat', '#error-password');\n            var payload = { old_password: values.old_password, new_password: values.password };\n            exports.auth.clear_error('#error-password');\n            $.ajax({ type: 'POST', url: '/auth/change_password', data: JSON.stringify(payload), contentType: 'application/json; charset=utf-8' }).done(function () {\n                exports.auth.success(exports.auth.texts['password_updated'], '#success-password');\n                $('#old_password').val('');\n                $('#password').val('');\n                $('#password_repeat').val('');\n            }).fail(function (response) {\n                if (response.status === 403)\n                    exports.auth.error(exports.auth.texts['invalid_password'], null, '#error-password');\n                else\n                    exports.auth.error(exports.auth.texts['ajax_error'], null, '#error-password');\n            });\n        }\n        if (op === 'recover') {\n            if (!values.username)\n                return exports.auth.error(exports.auth.texts['please_username'], 'username');\n            var payload = { username: values.username };\n            exports.auth.clear_error();\n            $.ajax({ type: 'POST', url: '/auth/recover', data: JSON.stringify(payload), contentType: 'application/json; charset=utf-8' }).done(function () {\n                exports.auth.success(exports.auth.texts['sent_password_recovery']);\n                $('#username').val('');\n            }).fail(function (response) {\n                if (response.status === 403)\n                    exports.auth.error(exports.auth.texts['invalid_username']);\n                else\n                    exports.auth.error(exports.auth.texts['ajax_error']);\n            });\n        }\n        if (op === 'reset') {\n            if (!values.password)\n                return exports.auth.error(exports.auth.texts['please_password'], 'password');\n            if (values.password.length < 6)\n                return exports.auth.error(exports.auth.texts['password_six'], 'password');\n            if (values.password !== values.password_repeat)\n                return exports.auth.error(exports.auth.texts['repeat_match'], 'password_repeat');\n            var payload = { username: (_c = exports.auth.reset) === null || _c === void 0 ? void 0 : _c['username'], token: (_d = exports.auth.reset) === null || _d === void 0 ? void 0 : _d['token'], password: values.password };\n            exports.auth.clear_error();\n            $.ajax({ type: 'POST', url: '/auth/reset', data: JSON.stringify(payload), contentType: 'application/json; charset=utf-8' }).done(function () {\n                exports.auth.success(exports.auth.texts['password_resetted']);\n                $('#password').val('');\n                $('#password_repeat').val('');\n                delete exports.auth.reset;\n                exports.auth.redirect('login');\n            }).fail(function (response) {\n                if (response.status === 403)\n                    exports.auth.error(exports.auth.texts['invalid_reset_link']);\n                else\n                    exports.auth.error(exports.auth.texts['ajax_error']);\n            });\n        }\n    },\n    markAsTeacher: function (username, is_teacher) {\n        $.ajax({ type: 'POST', url: '/admin/markAsTeacher', data: JSON.stringify({ username: username, is_teacher: is_teacher }), contentType: 'application/json; charset=utf-8' }).done(function () {\n            modal_1.modal.alert(['User', username, 'successfully', is_teacher ? 'marked' : 'unmarked', 'as teacher'].join(' '), 4000);\n            location.reload();\n        }).fail(function (error) {\n            console.log(error);\n            modal_1.modal.alert(['Error when', is_teacher ? 'marking' : 'unmarking', 'user', username, 'as teacher'].join(' '));\n        });\n    },\n    changeUserEmail: function (username, email) {\n        modal_1.modal.prompt('Please enter the corrected email', email, function (correctedEmail) {\n            if (correctedEmail === email)\n                return;\n            if (!correctedEmail.match(exports.auth.emailRegex))\n                return modal_1.modal.alert('Please enter a valid email.');\n            $.ajax({ type: 'POST', url: '/admin/changeUserEmail', data: JSON.stringify({ username: username, email: correctedEmail }), contentType: 'application/json; charset=utf-8' }).done(function () {\n                modal_1.modal.alert(['Successfully changed the email for User', username, 'to', correctedEmail].join(' '));\n                location.reload();\n            }).fail(function (error) {\n                console.log(error);\n                modal_1.modal.alert(['Error when changing the email for User', username].join(' '));\n            });\n        });\n    },\n};\n// *** LOADERS ***\nif ($('#country')) {\n    var html_1 = $('#country').html();\n    Object.keys(countries).map(function (code) {\n        html_1 += '<option value=\"' + code + '\">' + countries[code] + '</option>';\n    });\n    $('#country').html(html_1);\n}\n$('.auth input').get().map(function (el) {\n    // Clear red borders if input was marked from a previous error.\n    el.addEventListener('input', function () { return exports.auth.clear_error(); });\n});\n// We use GET /profile to see if we're logged in since we use HTTP only cookies and cannot check from javascript.\n$.ajax({ type: 'GET', url: '/profile' }).done(function (response) {\n    if (['/signup', '/login'].indexOf(window.location.pathname) !== -1)\n        exports.auth.redirect('my-profile');\n    exports.auth.profile = response;\n    if ($('#profile').html()) {\n        $('#username').html(response.username);\n        $('#email').val(response.email);\n        $('#birth_year').val(response.birth_year);\n        $('#gender').val(response.gender);\n        $('#country').val(response.country);\n        if (response.prog_experience) {\n            $('input[name=has_experience][value=\"' + response.prog_experience + '\"]').prop('checked', true);\n            if (response.prog_experience === 'yes')\n                $('#languages').show();\n        }\n        (response.experience_languages || []).map(function (lang) {\n            $('input[name=languages][value=\"' + lang + '\"]').prop('checked', true);\n        });\n        $('#student_classes ul').html((response.student_classes || []).map(function (Class) {\n            return '<li>' + exports.auth.entityify(Class.name) + '</li>';\n        }).join(''));\n    }\n}).fail(function (_response) {\n    if (window.location.pathname.indexOf('/my-profile') !== -1)\n        exports.auth.redirect('login');\n});\nif (window.location.pathname === '/reset') {\n    var query = window.location.search.slice(1).split('&');\n    var params_1 = {};\n    query.map(function (item) {\n        var split = item.split('=');\n        params_1[split[0]] = decodeURIComponent(split[1]);\n    });\n    // If we don't receive username and token, the redirect link is invalid. We redirect the user to /recover.\n    if (!params_1['username'] || !params_1['token'])\n        exports.auth.redirect('recover');\n    else\n        exports.auth.reset = params_1;\n}\nif (window.location.pathname === '/signup') {\n    var login_username = localStorage.getItem('hedy-login-username');\n    if (login_username) {\n        localStorage.removeItem('hedy-login-username');\n        if (login_username.match('@'))\n            $('#email').val(login_username);\n        else\n            $('#username').val(login_username);\n    }\n}\n$('#email, #mail_repeat').on('cut copy paste', function (e) {\n    e.preventDefault();\n    return false;\n});\n/**\n * After login:\n *\n * - Check if there's a saved program in localstorage. If so, save it.\n * - Check if we were supposed to be joining a class. If so, join it.\n * - Otherwise redirect to \"my programs\".\n */\nfunction afterLogin() {\n    return __awaiter(this, void 0, void 0, function () {\n        var savedProgramString, savedProgram, redirect, joinClassString, joinClass;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    savedProgramString = localStorage.getItem('hedy-first-save');\n                    savedProgram = savedProgramString ? JSON.parse(savedProgramString) : undefined;\n                    if (!savedProgram) return [3 /*break*/, 2];\n                    return [4 /*yield*/, (0, app_1.saveitP)(savedProgram[0], savedProgram[1], savedProgram[2], savedProgram[3])];\n                case 1:\n                    _a.sent();\n                    localStorage.removeItem('hedy-first-save');\n                    redirect = localStorage.getItem('hedy-save-redirect');\n                    if (redirect) {\n                        localStorage.removeItem('hedy-save-redirect');\n                        exports.auth.redirect(redirect);\n                    }\n                    _a.label = 2;\n                case 2:\n                    joinClassString = localStorage.getItem('hedy-join');\n                    joinClass = joinClassString ? JSON.parse(joinClassString) : undefined;\n                    if (joinClass) {\n                        localStorage.removeItem('hedy-join');\n                        return [2 /*return*/, (0, teachers_1.join_class)(joinClass.link, joinClass.name)];\n                    }\n                    exports.auth.redirect('programs');\n                    return [2 /*return*/];\n            }\n        });\n    });\n}\nfunction validBirthYearString(year) {\n    var birth_year = parseInt(year);\n    if (!birth_year || birth_year < 1900 || birth_year > new Date().getFullYear())\n        return false;\n    return true;\n}\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.get_trimmed_code = exports.load_quiz = exports.prompt_unsaved = exports.copy_to_clipboard = exports.share_program = exports.viewProgramLink = exports.saveitP = exports.saveit = exports.tryPaletteCode = exports.runit = exports.theGlobalEditor = void 0;\n// It's important that this file gets loaded first\nrequire(\"./syntaxModesRules\");\nvar modal_1 = require(\"./modal\");\nvar auth_1 = require(\"./auth\");\n(function () {\n    // A bunch of code expects a global \"State\" object. Set it here if not\n    // set yet.\n    if (!window.State) {\n        window.State = {};\n    }\n    // *** EDITOR SETUP ***\n    initializeMainEditor($('#editor'));\n    var _loop_1 = function (preview) {\n        $(preview).addClass('text-lg rounded');\n        var exampleEditor = turnIntoAceEditor(preview, true);\n        // Fits to content size\n        exampleEditor.setOptions({ maxLines: Infinity });\n        exampleEditor.setOptions({ minLines: 2 });\n        // Strip trailing newline, it renders better\n        exampleEditor.setValue(exampleEditor.getValue().replace(/\\n+$/, ''), -1);\n        // And add an overlay button to the editor, if the no-copy-button attribute isn't there\n        if (!$(preview).hasClass('no-copy-button')) {\n            var buttonContainer = $('<div>').css({ position: 'absolute', top: 5, right: 5, width: 'auto' }).appendTo(preview);\n            $('<button>').attr('title', UiMessages['try_button']).css({ fontFamily: 'sans-serif' }).addClass('green-btn').text('\u21E5').appendTo(buttonContainer).click(function () {\n                exports.theGlobalEditor === null || exports.theGlobalEditor === void 0 ? void 0 : exports.theGlobalEditor.setValue(exampleEditor.getValue() + '\\n');\n            });\n        }\n    };\n    // Any code blocks we find inside 'turn-pre-into-ace' get turned into\n    // read-only editors (for syntax highlighting)\n    for (var _i = 0, _a = $('.turn-pre-into-ace pre').get(); _i < _a.length; _i++) {\n        var preview = _a[_i];\n        _loop_1(preview);\n    }\n    /**\n     * Initialize the main editor and attach all the required event handlers\n     */\n    function initializeMainEditor($editor) {\n        if (!$editor.length)\n            return;\n        // We expose the editor globally so it's available to other functions for resizing\n        var editor = turnIntoAceEditor($editor.get(0), $editor.data('readonly'));\n        exports.theGlobalEditor = editor;\n        modal_1.error.setEditor(editor);\n        window.Range = ace.require('ace/range').Range; // get reference to ace/range\n        // Load existing code from session, if it exists\n        var storage = window.sessionStorage;\n        if (storage) {\n            var levelKey_1 = $editor.data('lskey');\n            var loadedProgram = $editor.data('loaded-program');\n            // On page load, if we have a saved program and we are not loading a program by id, we load the saved program\n            var programFromStorage = storage.getItem(levelKey_1);\n            if (loadedProgram !== 'True' && programFromStorage) {\n                editor.setValue(programFromStorage, 1);\n            }\n            // When the user exits the editor, save what we have.\n            editor.on('blur', function (_e) {\n                storage.setItem(levelKey_1, editor.getValue());\n            });\n            // If prompt is shown and user enters text in the editor, hide the prompt.\n            editor.on('change', function () {\n                if ($('#inline-modal').is(':visible'))\n                    $('#inline-modal').hide();\n                window.State.disable_run = false;\n                $('#runit').css('background-color', '');\n                window.State.unsaved_changes = true;\n                clearErrors(editor);\n            });\n        }\n        // *** PROMPT TO SAVE CHANGES ***\n        window.onbeforeunload = function () {\n            // The browser doesn't show this message, rather it shows a default message.\n            if (window.State.unsaved_changes && !window.State.no_unload_prompt) {\n                return auth_1.auth.texts['unsaved_changes'];\n            }\n            else {\n                return undefined;\n            }\n        };\n        // *** KEYBOARD SHORTCUTS ***\n        var altPressed;\n        // alt is 18, enter is 13\n        window.addEventListener('keydown', function (ev) {\n            var keyCode = ev.keyCode;\n            if (keyCode === 18) {\n                altPressed = true;\n                return;\n            }\n            if (keyCode === 13 && altPressed) {\n                if (!window.State.level || !window.State.lang) {\n                    throw new Error('Oh no');\n                }\n                runit(window.State.level, window.State.lang, function () {\n                    $('#output').focus();\n                });\n            }\n            // We don't use jquery because it doesn't return true for this equality check.\n            if (keyCode === 37 && document.activeElement === document.getElementById('output')) {\n                editor.focus();\n                editor.navigateFileEnd();\n            }\n        });\n        window.addEventListener('keyup', function (ev) {\n            var keyCode = ev.keyCode;\n            if (keyCode === 18) {\n                altPressed = false;\n                return;\n            }\n        });\n        return editor;\n    }\n    /**\n     * Turn an HTML element into an Ace editor\n     */\n    function turnIntoAceEditor(element, isReadOnly) {\n        var editor = ace.edit(element);\n        editor.setTheme(\"ace/theme/monokai\");\n        if (isReadOnly) {\n            editor.setOptions({\n                readOnly: true,\n                showGutter: false,\n                showPrintMargin: false,\n                highlightActiveLine: false\n            });\n        }\n        // a variable which turns on(1) highlighter or turns it off(0)\n        var highlighter = 1;\n        if (highlighter == 1) {\n            // Everything turns into 'ace/mode/levelX', except what's in\n            // this table. Yes the numbers are strings. That's just JavaScript for you.\n            var modeExceptions = {\n                '9': 'ace/mode/level9and10',\n                '10': 'ace/mode/level9and10',\n                '18': 'ace/mode/level18and19',\n                '19': 'ace/mode/level18and19',\n            };\n            if (window.State.level) {\n                var mode = modeExceptions[window.State.level] || \"ace/mode/level\" + window.State.level;\n                editor.session.setMode(mode);\n            }\n        }\n        return editor;\n    }\n})();\nfunction reloadOnExpiredSession() {\n    // If user is not logged in or session is not expired, return false.\n    if (!auth_1.auth.profile || auth_1.auth.profile.session_expires_at > Date.now())\n        return false;\n    // Otherwise, reload the page to update the top bar.\n    location.reload();\n    return true;\n}\nfunction clearErrors(editor) {\n    editor.session.clearAnnotations();\n    for (var marker in editor.session.getMarkers(false)) {\n        editor.session.removeMarker(marker);\n    }\n}\nfunction runit(level, lang, cb) {\n    if (window.State.disable_run)\n        return modal_1.modal.alert(auth_1.auth.texts['answer_question']);\n    if (reloadOnExpiredSession())\n        return;\n    modal_1.error.hide();\n    try {\n        level = level.toString();\n        var editor = exports.theGlobalEditor;\n        var code = get_trimmed_code();\n        clearErrors(editor);\n        console.log('Original program:\\n', code);\n        $.ajax({\n            type: 'POST',\n            url: '/parse',\n            data: JSON.stringify({\n                level: level,\n                code: code,\n                lang: lang,\n                read_aloud: !!$('#speak_dropdown').val(),\n                adventure_name: window.State.adventure_name\n            }),\n            contentType: 'application/json',\n            dataType: 'json'\n        }).done(function (response) {\n            console.log('Response', response);\n            if (response.Warning) {\n                modal_1.error.showWarning(ErrorMessages['Transpile_warning'], response.Warning);\n            }\n            if (response.Error) {\n                modal_1.error.show(ErrorMessages['Transpile_error'], response.Error);\n                if (response.Location && response.Location[0] != \"?\") {\n                    editor.session.setAnnotations([\n                        {\n                            row: response.Location[0] - 1,\n                            column: response.Location[1] - 1,\n                            text: \"\",\n                            type: \"error\",\n                        }\n                    ]);\n                    // FIXME change this to apply only to the error span once errors have an end location.\n                    editor.session.addMarker(new ace.Range(response.Location[0] - 1, response.Location[1] - 1, response.Location[0] - 1, response.Location[1]), \"editor-error\", \"fullLine\", false);\n                }\n                return;\n            }\n            runPythonProgram(response.Code, response.has_turtle, cb).catch(function (err) {\n                console.log(err);\n                modal_1.error.show(ErrorMessages['Execute_error'], err.message);\n                reportClientError(level, code, err.message);\n            });\n        }).fail(function (xhr) {\n            console.error(xhr);\n            // https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/readyState\n            if (xhr.readyState < 4) {\n                modal_1.error.show(ErrorMessages['Connection_error'], ErrorMessages['CheckInternet']);\n            }\n            else {\n                modal_1.error.show(ErrorMessages['Other_error'], ErrorMessages['ServerError']);\n            }\n        });\n    }\n    catch (e) {\n        console.error(e);\n        modal_1.error.show(ErrorMessages['Other_error'], e.message);\n    }\n}\nexports.runit = runit;\n/**\n * Called when the user clicks the \"Try\" button in one of the palette buttons\n */\nfunction tryPaletteCode(exampleCode) {\n    var editor = ace.edit(\"editor\");\n    var MOVE_CURSOR_TO_END = 1;\n    editor.setValue(exampleCode + '\\n', MOVE_CURSOR_TO_END);\n    window.State.unsaved_changes = false;\n}\nexports.tryPaletteCode = tryPaletteCode;\nfunction saveit(level, lang, name, code, cb) {\n    modal_1.error.hide();\n    if (reloadOnExpiredSession())\n        return;\n    try {\n        // If there's no session but we want to save the program, we store the program data in localStorage and redirect to /login.\n        if (!auth_1.auth.profile) {\n            return modal_1.modal.confirm(auth_1.auth.texts['save_prompt'], function () {\n                // If there's an adventure_name, we store it together with the level, because it won't be available otherwise after signup/login.\n                if (window.State && window.State.adventure_name && !Array.isArray(level))\n                    level = [level, window.State.adventure_name];\n                localStorage.setItem('hedy-first-save', JSON.stringify([level, lang, name, code]));\n                window.location.pathname = '/login';\n            });\n        }\n        window.State.unsaved_changes = false;\n        var adventure_name = window.State.adventure_name;\n        // If saving a program for an adventure after a signup/login, level is an array of the form [level, adventure_name]. In that case, we unpack it.\n        if (Array.isArray(level)) {\n            adventure_name = level[1];\n            level = level[0];\n        }\n        $.ajax({\n            type: 'POST',\n            url: '/programs',\n            data: JSON.stringify({\n                level: level,\n                lang: lang,\n                name: name,\n                code: code,\n                adventure_name: adventure_name\n            }),\n            contentType: 'application/json',\n            dataType: 'json'\n        }).done(function (response) {\n            var _a;\n            // The auth functions use this callback function.\n            if (cb)\n                return response.Error ? cb(response) : cb(null, response);\n            if (response.Warning) {\n                modal_1.error.showWarning(ErrorMessages['Transpile_warning'], response.Warning);\n            }\n            if (response.Error) {\n                modal_1.error.show(ErrorMessages['Transpile_error'], response.Error);\n                return;\n            }\n            modal_1.modal.alert(auth_1.auth.texts['save_success_detail'], 4000);\n            // If we succeed, we need to update the default program name & program for the currently selected tab.\n            // To avoid this, we'd have to perform a page refresh to retrieve the info from the server again, which would be more cumbersome.\n            // The name of the program might have been changed by the server, so we use the name stated by the server.\n            $('#program_name').val(response.name);\n            (_a = window.State.adventures) === null || _a === void 0 ? void 0 : _a.map(function (adventure) {\n                if (adventure.short_name === (adventure_name || 'level')) {\n                    adventure.loaded_program = { name: response.name, code: code };\n                }\n            });\n        }).fail(function (err) {\n            console.error(err);\n            modal_1.error.show(ErrorMessages['Connection_error'], JSON.stringify(err));\n            if (err.status === 403) {\n                localStorage.setItem('hedy-first-save', JSON.stringify([adventure_name ? [level, adventure_name] : level, lang, name, code]));\n                localStorage.setItem('hedy-save-redirect', 'hedy');\n                window.location.pathname = '/login';\n            }\n        });\n    }\n    catch (e) {\n        console.error(e);\n        modal_1.error.show(ErrorMessages['Other_error'], e.message);\n    }\n}\nexports.saveit = saveit;\n/**\n * The 'saveit' function, as an async function\n */\nfunction saveitP(level, lang, name, code) {\n    return new Promise(function (ok, ko) {\n        saveit(level, lang, name, code, function (err, response) {\n            if (err) {\n                ko(err);\n            }\n            else {\n                ok(response);\n            }\n        });\n    });\n}\nexports.saveitP = saveitP;\nfunction viewProgramLink(programId) {\n    return window.location.origin + '/hedy/' + programId + '/view';\n}\nexports.viewProgramLink = viewProgramLink;\nfunction share_program(level, lang, id, Public, reload) {\n    if (!auth_1.auth.profile)\n        return modal_1.modal.alert(auth_1.auth.texts['must_be_logged']);\n    var share = function (id) {\n        $.ajax({\n            type: 'POST',\n            url: '/programs/share',\n            data: JSON.stringify({\n                id: id,\n                public: Public\n            }),\n            contentType: 'application/json',\n            dataType: 'json'\n        }).done(function (_response) {\n            // If we're sharing the program, copy the link to the clipboard.\n            if (Public)\n                copy_to_clipboard(viewProgramLink(id), true);\n            modal_1.modal.alert(Public ? auth_1.auth.texts['share_success_detail'] : auth_1.auth.texts['unshare_success_detail'], 4000);\n            if (reload)\n                setTimeout(function () { location.reload(); }, 1000);\n        }).fail(function (err) {\n            console.error(err);\n            modal_1.error.show(ErrorMessages['Connection_error'], JSON.stringify(err));\n        });\n    };\n    // If id is not true, the request comes from the programs page. In that case, we merely call the share function.\n    if (id !== true)\n        return share(id);\n    // Otherwise, we save the program and then share it.\n    // Saving the program makes things way simpler for many reasons: it covers the cases where:\n    // 1) there's no saved program; 2) there's no saved program for that user; 3) the program has unsaved changes.\n    var name = \"\" + $('#program_name').val();\n    var code = get_trimmed_code();\n    return saveit(level, lang, name, code, function (err, resp) {\n        if (err && err.Warning)\n            return modal_1.error.showWarning(ErrorMessages['Transpile_warning'], err.Warning);\n        if (err && err.Error)\n            return modal_1.error.show(ErrorMessages['Transpile_error'], err.Error);\n        share(resp.id);\n    });\n}\nexports.share_program = share_program;\nfunction copy_to_clipboard(string, noAlert) {\n    var _a, _b;\n    // https://hackernoon.com/copying-text-to-clipboard-with-javascript-df4d4988697f\n    var el = document.createElement('textarea');\n    el.value = string;\n    el.setAttribute('readonly', '');\n    el.style.position = 'absolute';\n    el.style.left = '-9999px';\n    document.body.appendChild(el);\n    var selection = document.getSelection();\n    var originalSelection = selection && selection.rangeCount > 0 ? selection.getRangeAt(0) : undefined;\n    el.select();\n    document.execCommand('copy');\n    document.body.removeChild(el);\n    if (originalSelection) {\n        (_a = document.getSelection()) === null || _a === void 0 ? void 0 : _a.removeAllRanges();\n        (_b = document.getSelection()) === null || _b === void 0 ? void 0 : _b.addRange(originalSelection);\n    }\n    if (!noAlert)\n        modal_1.modal.alert(auth_1.auth.texts['copy_clipboard'], 4000);\n}\nexports.copy_to_clipboard = copy_to_clipboard;\n/**\n * Do a POST with the error to the server so we can log it\n */\nfunction reportClientError(level, code, client_error) {\n    $.ajax({\n        type: 'POST',\n        url: '/report_error',\n        data: JSON.stringify({\n            level: level,\n            code: code,\n            page: window.location.href,\n            client_error: client_error,\n        }),\n        contentType: 'application/json',\n        dataType: 'json'\n    });\n}\nwindow.onerror = function reportClientException(message, source, line_number, column_number, error) {\n    $.ajax({\n        type: 'POST',\n        url: '/client_exception',\n        data: JSON.stringify({\n            message: message,\n            source: source,\n            line_number: line_number,\n            column_number: column_number,\n            error: error,\n            url: window.location.href,\n            user_agent: navigator.userAgent,\n        }),\n        contentType: 'application/json',\n        dataType: 'json'\n    });\n};\nfunction runPythonProgram(code, hasTurtle, cb) {\n    var outputDiv = $('#output');\n    outputDiv.empty();\n    Sk.pre = \"output\";\n    var turtleConfig = (Sk.TurtleGraphics || (Sk.TurtleGraphics = {}));\n    turtleConfig.target = 'turtlecanvas';\n    turtleConfig.width = 400;\n    turtleConfig.height = 300;\n    turtleConfig.worldWidth = 400;\n    turtleConfig.worldHeight = 300;\n    if (!hasTurtle) {\n        // There might still be a visible turtle panel. If the new program does not use the Turtle,\n        // remove it (by clearing the '#turtlecanvas' div)\n        $('#turtlecanvas').empty();\n    }\n    Sk.configure({\n        output: outf,\n        read: builtinRead,\n        inputfun: inputFromInlineModal,\n        inputfunTakesPrompt: true,\n        __future__: Sk.python3\n    });\n    return Sk.misceval.asyncToPromise(function () {\n        return Sk.importMainWithBody(\"<stdin>\", false, code, true);\n    }).then(function (_mod) {\n        console.log('Program executed');\n        // Check if the program was correct but the output window is empty: Return a warning\n        if ($('#output').is(':empty') && $('#turtlecanvas').is(':empty')) {\n            modal_1.error.showWarning(ErrorMessages['Transpile_warning'], ErrorMessages['Empty_output']);\n        }\n        if (cb)\n            cb();\n    }).catch(function (err) {\n        // Extract error message from error\n        console.log(err);\n        var errorMessage = errorMessageFromSkulptError(err) || JSON.stringify(err);\n        throw new Error(errorMessage);\n    });\n    /**\n     * Get the error messages from a Skulpt error\n     *\n     * They look like this:\n     *\n     * {\"args\":{\"v\":[{\"v\":\"name 'name' is not defined\"}]},\"traceback\":[{\"lineno\":3,\"colno\":0,\"filename\":\"<stdin>.py\"}]}\n     *\n     * Don't know why, so let's be defensive about it.\n     */\n    function errorMessageFromSkulptError(err) {\n        var message = err.args && err.args.v && err.args.v[0] && err.args.v[0].v;\n        return message;\n    }\n    function addToOutput(text, color) {\n        $('<span>').text(text).css({ color: color }).appendTo(outputDiv);\n    }\n    // output functions are configurable.  This one just appends some text\n    // to a pre element.\n    function outf(text) {\n        addToOutput(text, 'white');\n        speak(text);\n    }\n    function builtinRead(x) {\n        if (Sk.builtinFiles === undefined || Sk.builtinFiles[\"files\"][x] === undefined)\n            throw \"File not found: '\" + x + \"'\";\n        return Sk.builtinFiles[\"files\"][x];\n    }\n    // This method draws the prompt for asking for user input.\n    function inputFromInlineModal(prompt) {\n        $('#turtlecanvas').empty();\n        return new Promise(function (ok) {\n            window.State.disable_run = true;\n            $('#runit').css('background-color', 'gray');\n            var input = $('#inline-modal input[type=\"text\"]');\n            $('#inline-modal .caption').text(prompt);\n            input.val('');\n            input.attr('placeholder', prompt);\n            speak(prompt);\n            setTimeout(function () {\n                input.focus();\n            }, 0);\n            $('#inline-modal form').one('submit', function (event) {\n                window.State.disable_run = false;\n                $('#runit').css('background-color', '');\n                event.preventDefault();\n                $('#inline-modal').hide();\n                ok(input.val());\n                $('#output').focus();\n                return false;\n            });\n            $('#inline-modal').show();\n        });\n    }\n}\nfunction speak(text) {\n    var selectedURI = $('#speak_dropdown').val();\n    if (!selectedURI) {\n        return;\n    }\n    var voice = window.speechSynthesis.getVoices().filter(function (v) { return v.voiceURI === selectedURI; })[0];\n    if (voice) {\n        var utterance = new SpeechSynthesisUtterance(text);\n        utterance.voice = voice;\n        utterance.rate = 0.9;\n        speechSynthesis.speak(utterance);\n    }\n}\n(function () {\n    if (!window.speechSynthesis) {\n        return; /* No point in even trying */\n    }\n    if (!window.State.lang) {\n        return; /* Not on a code page */\n    }\n    /**\n     * Show the \"speak\" checkbox if we find that we have speech support for the\n     * current language (showing an initially hidden element is a better experience\n     * than hiding an initially shown element... arguably... ?)\n     *\n     * Also, for funzies: the speechSynthesis.getVoices() array is asynchronously\n     * populated *some time* after the page loads... and we won't know when. Keep\n     * on testing periodically until we got it or it's taken too long to finish.\n     */\n    var attempts = 0;\n    var timer = setInterval(function () {\n        var _a;\n        attempts += 1;\n        var voices = findVoices((_a = window.State.lang) !== null && _a !== void 0 ? _a : '');\n        if (voices.length > 0) {\n            for (var _i = 0, voices_1 = voices; _i < voices_1.length; _i++) {\n                var voice = voices_1[_i];\n                $('#speak_dropdown').append($('<option>').attr('value', voice.voiceURI).text('\uD83D\uDCE3 ' + voice.name));\n            }\n            $('#speak_container').show();\n            clearInterval(timer);\n        }\n        if (attempts >= 20) { // ~2 seconds\n            // Give up\n            clearInterval(timer);\n        }\n    }, 100);\n    function findVoices(lang) {\n        // Our own \"lang\" is *typically* just the language code, but we also have \"pt_BR\".\n        var m = lang.match(/^([a-z]+)/i);\n        if (!m) {\n            return [];\n        }\n        var simpleLang = m[1];\n        // If the feature doesn't exist in the browser, return null\n        if (!window.speechSynthesis) {\n            return [];\n        }\n        return window.speechSynthesis.getVoices().filter(function (voice) { return voice.lang.startsWith(simpleLang); });\n    }\n})();\nfunction prompt_unsaved(cb) {\n    if (!window.State.unsaved_changes)\n        return cb();\n    // This variable avoids showing the generic native `onbeforeunload` prompt\n    window.State.no_unload_prompt = true;\n    modal_1.modal.confirm(auth_1.auth.texts['unsaved_changes'], cb);\n}\nexports.prompt_unsaved = prompt_unsaved;\nfunction load_quiz(level) {\n    $('*[data-tabtarget=\"end\"]').html('<iframe id=\"quiz-iframe\" class=\"w-full\" title=\"Quiz\" src=\"/quiz/start/' + level + '\"></iframe>');\n}\nexports.load_quiz = load_quiz;\nfunction get_trimmed_code() {\n    try {\n        // This module may or may not exist, so let's be extra careful here.\n        var whitespace = ace.require(\"ace/ext/whitespace\");\n        whitespace.trimTrailingSpace(exports.theGlobalEditor.session, true);\n    }\n    catch (e) {\n        console.error(e);\n    }\n    return exports.theGlobalEditor === null || exports.theGlobalEditor === void 0 ? void 0 : exports.theGlobalEditor.getValue();\n}\nexports.get_trimmed_code = get_trimmed_code;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar modal_1 = require(\"./modal\");\nvar auth_1 = require(\"./auth\");\nvar app_1 = require(\"./app\");\n/**\n * Activate tabs\n *\n * Protocol:\n *\n * - Tabs consist of a TAB (the sticky-outy bit) and a TARGET\n *   (the pane that gets shown and hidden).\n *\n * - TABS should have: <... data-tab=\"SOME-ID\">\n *\n * - TARGETS should have: <... data-tabtarget=\"SOME-ID\">\n *\n * When a TAB is clicked, the TARGET with the matching id is shown\n * (and all other TARGETS in the same containing HTML element are hidden).\n *\n * The active TAB is indicated by the  '.tab-selected' class, the active\n * TARGET by the *absence* of the '.hidden' class.\n */\n$(function () {\n    function resetWindow() {\n        $('#warningbox').hide();\n        $('#errorbox').hide();\n        $('#output').empty();\n        $('#turtlecanvas').empty();\n        window.State.unsaved_changes = false;\n    }\n    function switchToTab(tabName) {\n        var _a, _b;\n        // Find the tab that leads to this selection, and its siblings\n        var tab = $('*[data-tab=\"' + tabName + '\"]');\n        var allTabs = tab.siblings('*[data-tab]');\n        // Fidn the target associated with this selection, and its siblings\n        var target = $('*[data-tabtarget=\"' + tabName + '\"]');\n        var allTargets = target.siblings('*[data-tabtarget]');\n        // Fix classes\n        allTabs.removeClass('tab-selected');\n        tab.addClass('tab-selected');\n        allTargets.addClass('hidden');\n        target.removeClass('hidden');\n        var adventures = {};\n        (_a = window.State.adventures) === null || _a === void 0 ? void 0 : _a.map(function (adventure) {\n            adventures[adventure.short_name] = adventure;\n        });\n        resetWindow();\n        if (tabName === 'end') {\n            $('#adventures-tab').css('max-height', '100%');\n            $('#level-header input').hide();\n            $('#editor-area').hide();\n            return;\n        }\n        $('#adventures-tab').css('max-height', '20em');\n        $('#level-header input').show();\n        $('#editor-area').show();\n        // If the loaded program (directly requested by link with id) matches the currently selected tab, use that, overriding the loaded program that came in the adventure or level.\n        if (window.State.loaded_program && (window.State.adventure_name_onload || 'level') === tabName) {\n            $('#program_name').val(window.State.loaded_program.name);\n            app_1.theGlobalEditor === null || app_1.theGlobalEditor === void 0 ? void 0 : app_1.theGlobalEditor.setValue(window.State.loaded_program.code);\n        }\n        // If there's a loaded program for the adventure or level now selected, use it.\n        else if ((_b = adventures[tabName]) === null || _b === void 0 ? void 0 : _b.loaded_program) {\n            $('#program_name').val(adventures[tabName].loaded_program.name);\n            app_1.theGlobalEditor === null || app_1.theGlobalEditor === void 0 ? void 0 : app_1.theGlobalEditor.setValue(adventures[tabName].loaded_program.code);\n        }\n        // If there's no loaded program (either requested by id or associated to the adventure/level), load defaults.\n        else if (tabName === 'level' && window.State.default_program_name && window.State.default_program) {\n            $('#program_name').val(window.State.default_program_name);\n            app_1.theGlobalEditor === null || app_1.theGlobalEditor === void 0 ? void 0 : app_1.theGlobalEditor.setValue(window.State.default_program);\n        }\n        else {\n            $('#program_name').val(adventures[tabName].default_save_name + ' - ' + window.State.level_title + ' ' + window.State.level);\n            app_1.theGlobalEditor === null || app_1.theGlobalEditor === void 0 ? void 0 : app_1.theGlobalEditor.setValue(adventures[tabName].start_code);\n        }\n        window.State.adventure_name = tabName === 'level' ? undefined : tabName;\n        app_1.theGlobalEditor === null || app_1.theGlobalEditor === void 0 ? void 0 : app_1.theGlobalEditor.clearSelection();\n        // If user wants to override the unsaved program, reset unsaved_changes\n        window.State.unsaved_changes = false;\n    }\n    $('*[data-tab]').click(function (e) {\n        var tab = $(e.target);\n        var tabName = tab.data('tab');\n        e.preventDefault();\n        // If there are unsaved changes, we warn the user before changing tabs.\n        if (window.State.unsaved_changes)\n            modal_1.modal.confirm(auth_1.auth.texts['unsaved_changes'], function () { return switchToTab(tabName); });\n        else\n            switchToTab(tabName);\n        // Do a 'replaceState' to add a '#anchor' to the URL\n        var hashFragment = tabName !== 'level' ? tabName : '';\n        if (window.history) {\n            window.history.replaceState(null, '', '#' + hashFragment);\n        }\n    });\n    // If we're opening an adventure from the beginning (either through a link to /hedy/adventures or through a saved program for an adventure), we click on the relevant tab.\n    // We click on `level` to load a program associated with level, if any.\n    if (window.State && window.State.adventure_name) {\n        switchToTab(window.State.adventure_name);\n    }\n    else if (window.location.hash) {\n        // If we have an '#anchor' in the URL, switch to that tab\n        var hashFragment = window.location.hash.replace(/^#/, '');\n        if (hashFragment) {\n            switchToTab(hashFragment);\n        }\n    }\n});\n", "\"use strict\";\n/**\n * Count newlines and also estimate how the text will be line wrapped\n */\nfunction estimateLineCount(s) {\n    var ESTIMATED_LINE_LENGTH = 80;\n    var lines = s.split('\\n');\n    var wrappedLines = lines.map(function (x) { return Math.floor(x.length / ESTIMATED_LINE_LENGTH); });\n    return sum(wrappedLines) + lines.length;\n}\nfunction sum(xs) {\n    var ret = 0;\n    for (var _a = 0, xs_1 = xs; _a < xs_1.length; _a++) {\n        var x = xs_1[_a];\n        ret += x;\n    }\n    return ret;\n}\nfunction resizeArea(el) {\n    var lines = Math.max(1, estimateLineCount($(el).val()));\n    var targetHeight = lines * 25 + 4;\n    // Allow for the case where the user made it bigger themselves\n    if ($(el).height() < targetHeight) {\n        $(el).css({ height: targetHeight + \"px\" });\n    }\n}\n$('textarea').each(function (_i, el) { return resizeArea(el); }).on('input', function (e) {\n    var target = $(e.target);\n    if (!target.hasClass('touched')) {\n        target.addClass('touched');\n        // Change the 'data-name=\"xxx\"' attribute into an actual 'name=\"xxx\"' attribute\n        // so that the value is actually submitted via the form.\n        target.attr('name', target.data('name'));\n        recordChangeToForm(target.closest('form'));\n    }\n    resizeArea(target);\n});\nvar FORM_MAP = new Map();\nfunction recordChangeToForm(form) {\n    var fileName = form.data('file');\n    var formData = FORM_MAP.get(fileName);\n    if (!formData) {\n        var button = $('button[data-file=\"' + fileName + '\"]');\n        formData = {\n            button: button,\n            changes: 0,\n        };\n        FORM_MAP.set(fileName, formData);\n    }\n    formData.changes += 1;\n    formData.button.text(fileName + \" (\" + formData.changes + \")\");\n}\n$('button[data-file]').click(function (e) {\n    var fileName = $(e.target).data('file');\n    var form = $('form[data-file=\"' + fileName + '\"]');\n    form.submit();\n});\n", "\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./modal\"), exports);\n__exportStar(require(\"./app\"), exports);\n__exportStar(require(\"./auth\"), exports);\nrequire(\"./syntaxModesRules\");\nrequire(\"./tabs\");\nrequire(\"./translating\");\n__exportStar(require(\"./teachers\"), exports);\n"],
  "mappings": "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",
  "names": []
}
